<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="utf-8"/>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0" name="viewport">
    <title>Kaomoji Polling Animation</title>
    <link href="style.css" rel="stylesheet">
</head>
<body>
<div class="container" style="margin-left: 5rem;">
    <div>
            <pre class="poll">
             ______  ______   ______   ______
            /\__  _\/\  ___\ /\  ___\ /\__  _\   Loading <a href="#{server}">#{server}</a> ...
            \/_/\ \/\ \  __\ \ \___  \\/_/\ \/
               \ \_\ \ \_____\\/\_____\  \ \_\     <span class="intermediary-status"></span> <span class="result"></span>
                \/_/  \/_____/ \/_____/   \/_/
                   ______   __  __   ______  ______  ______   ______  ______
                  /\  ___\ /\ \/\ \ /\  == \/\  == \/\  __ \ /\  == \/\__  _\
                  \ \___  \\ \ \_\ \\ \  _-/\ \  _-/\ \ \/\ \\ \  __<\/_/\ \/
                   \/\_____\\ \_____\\ \_\   \ \_\   \ \_____\\ \_\ \_\ \ \_\
                    \/_____/ \/_____/ \/_/    \/_/    \/_____/ \/_/ /_/  \/_/
                        ______   ______   ______   __   __ __   ______   ______
                       /\  ___\ /\  ___\ /\  == \ /\ \ / //\ \ /\  ___\ /\  ___\
                       \ \___  \\ \  __\ \ \  __< \ \ \'/ \ \ \\ \ \____\ \  __\
                        \/\_____\\ \_____\\ \_\ \_\\ \__|  \ \_\\ \_____\\ \_____\
                         \/_____/ \/_____/ \/_/ /_/ \/_/    \/_/ \/_____/ \/_____/
            <span class="poller">ｄ( * <span class="eye"></span><span class="mouth"></span><span class="eye"></span>)<span class="request">hello<span
                class="request-detail">❓</span></span><ol class="response">
                <li data-response="true"></li>
                <li data-response="false"></li>
                <li data-response="false"></li>
            </ol></span>
            </pre>
    </div>
</div>
<div class="debug" style="margin-top: 10rem">
    sdjkjjk
</div>
<script>
    function setClass(newClass) {
        document.documentElement.classList.forEach(cl => document.documentElement.classList.remove(cl));
        document.documentElement.classList.add(newClass);
        document.querySelector('.debug').innerText = `DEBUG: <html class="${newClass}">...`;
    }

    function simulation(finalState, callback) {
        setClass('loading');
        window.setTimeout(function () {
            setClass(finalState);
            window.setTimeout(function () {
                callback();
            }, 5000);
        }, 5000);
    }

    simulation('succeeded', function () {
        simulation('failed', function () {
            simulation('timed-out', function () {
            });
        });
    });
</script>
</body>
</html>
